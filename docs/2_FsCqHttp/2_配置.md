---
title: 配置
category: FsCqHttp
categoryindex: 2
index: 2
---

## FsCqHttpConfigParser
一般配置信息定义在```ConfigBase.fs/KPX.FsCqHttp.FsCqHttpConfig```。
此外还有三个特殊配置是必须的：
* reverse 反向WebSocket模式，在指定地址上监听。
* endpoint 正向WebSocket模式，连接到指定地址。 
* token 鉴权用的token字符串。
  
应用可以根据需要选择传值方法：
```fsharp
let cfgFile = "path/to/config/file.txt
let cfg = FsCqHttpConfigParser()

if argv.Length <> 0 then
    cfg.Parse(argv)
elif IO.File.Exists(cfgFile) then
    cfg.Parse(IO.File.ReadAllLines(cfgFile))
else
    cfg.ParseEnvironment()
```

## ContextModuleLoader
定义FsCqHttp查找事件模块的方法。

默认加载所有已加载程序集中所有继承```HandlerModuleBase```的类，部分情况下可能需要手动引用程序集以便加载，例如：```typeof<NotloadedAssembly.SomeType> |> ignore```。

如果需要按Bot账号分别处理，可以自行继承```ContextModuleLoader```后覆盖```ContextModuleLoader.Instance```。

